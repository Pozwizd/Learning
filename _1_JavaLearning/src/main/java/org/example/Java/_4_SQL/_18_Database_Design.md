# 18. Проектирование БД (Database Design)

## Нормализация (Normalization)
Процесс организации данных для уменьшения избыточности и предотвращения аномалий.

### 1NF (Первая нормальная форма)
*   Атомарность значений (в одной ячейке одно значение, никаких списков через запятую).
*   Уникальность строк (наличие Primary Key).

### 2NF (Вторая нормальная форма)
*   Соответствует 1NF.
*   Все неключевые атрибуты зависят от **всего** первичного ключа (нет частичной зависимости от составного ключа).
    *   Если PK (OrderID, ProductID), то `ProductName` зависит только от `ProductID`, а не от `OrderID`. Его нужно вынести в отдельную таблицу Products.

### 3NF (Третья нормальная форма)
*   Соответствует 2NF.
*   Нет транзитивных зависимостей (неключевые атрибуты не зависят от других неключевых атрибутов).
    *   Если есть `City` и `ZipCode`, и `City` зависит от `ZipCode`, это нарушение. Нужно вынести в таблицу адресов.

### BCNF, 4NF, 5NF
Более строгие формы для сложных случаев. Обычно 3NF достаточно для большинства приложений.

## Денормализация (Denormalization)
Намеренное добавление избыточности для ускорения чтения (обычно в OLAP системах или для тяжелых отчетов).
*   Пример: Хранение `TotalOrders` в таблице `Users`, чтобы не делать `COUNT(*)` каждый раз.
*   Минус: Нужно поддерживать актуальность данных (триггеры или cron).

## ER Modeling (Entity-Relationship)
Моделирование сущностей и связей перед созданием таблиц.

### Типы связей
1.  **One-to-One (1:1)**: Один пользователь - Один паспорт. (FK в любой таблице или одна таблица).
2.  **One-to-Many (1:M)**: Один отдел - Много сотрудников. (FK на стороне "Много" -> у сотрудника есть DepartmentID).
3.  **Many-to-Many (M:N)**: Студенты и Курсы. (Требуется промежуточная таблица связей `StudentCourses` с двумя FK).
